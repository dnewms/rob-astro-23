---
import Layout from '../../../layouts/MainLayout.astro';
import { getAffiliateFacultyData } from '../../../lib/googleSheets';
import { Icon } from "astro-icon/components";
import Breadcrumbs from "../../../components/Breadcrumbs.astro";
import SubNav from "../../../components/SubNav.astro";

const facultyMembers = await getAffiliateFacultyData();
facultyMembers.sort((a, b) => a.lastName.localeCompare(b.lastName));
---

<Layout title="Affiliate Faculty">
  <main>
    <div class="max-w-6xl w-11/12 mx-auto py-2">
      <Breadcrumbs />
    </div>
    
    <div class="mt-4 mb-4 max-w-6xl w-11/12 mx-auto">
      <div class="w-full bg-umichblue dark:bg-arboretumBlue shadow-lg">
        <div class="p-3 pb-6 md:p-8">
          <h1 class="text-4xl font-roboto text-white font-bold">
            <span class="relative border-b-4 border-maize">Affiliate Faculty</span>
          </h1>
        </div>
      </div>
      <SubNav />
    </div>

    <div class="max-w-6xl w-11/12 mx-auto">
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 pt-10 px-2">
        {facultyMembers.map((faculty) => (
          <div class="bg-white dark:bg-gray-800 p-6 rounded-sm shadow-md">
            <div class="flex flex-col md:flex-row justify-between">
              <div class="flex-1">
                <h2 class="text-xl font-bold text-gray-900 dark:text-white">
                  {faculty.preferredName} {faculty.lastName}
                </h2>

                <p class="text-arboretumBlue dark:text-taubmanTeal text-sm mt-1">
                  {faculty.department1}{faculty.department2 && ` and ${faculty.department2}`}
                </p>
                <p class="text-gray-600 dark:text-gray-300 text-sm mt-2 italic">
                  {faculty.affiliation}
                </p>
                
                {/* Expandable Research Interests */}
             {/* <details class="mt-4">
                  <summary class="text-sm font-medium cursor-pointer hover:text-arboretumBlue dark:hover:text-taubmanTeal">
                    Research Interests
                  </summary>
                  <p class="mt-2 text-sm text-gray-600 dark:text-gray-300 pl-4">
                    {faculty.researchInterests}
                  </p>
                </details> */}
              </div> 

              <div class="flex flex-row items-start md:items-center gap-4 mt-4 md:mt-0">
                {faculty.googleScholar && (
                  <a 
                    href={faculty.googleScholar}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-gray-600 dark:text-gray-300 hover:text-arboretumBlue dark:hover:text-taubmanTeal"
                    title="Google Scholar"
                  >
                    <Icon name="mdi:school" class="w-6 h-6" />
                  </a>
                )}
                {faculty.website && (
                  <a 
                    href={faculty.website}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-gray-600 dark:text-gray-300 hover:text-arboretumBlue dark:hover:text-taubmanTeal"
                    title="Website"
                  >
                    <Icon name="mdi:web" class="w-6 h-6" />
                  </a>
                )}
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </main>
</Layout>